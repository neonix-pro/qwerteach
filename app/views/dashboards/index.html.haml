.container-fluid
  -# first, lessons currently happening
  - unless @current_lesson.nil?
    .row
      .col-xs-12#current_lesson
        = render partial: 'current_lesson', locals:{lesson:  @current_lesson}
  -# Teacher
  -if @user.is_a?(Teacher)
    .row
      .col-xs-12#welcome
        =render partial: 'dashboards/teacher/welcome', locals:{user: @user}
      .col-xs-12#postulation
        =render partial: 'dashboards/teacher/postulance'
  -else #Student
    -# if the user never had a lesson, show, welcome dashboard (welcome, topics groups list and how to request a lesson)
    -if @user.lessons_received.empty? && !@user.is_a?(Student)
      .row
        .col-xs-12#welcome
          =render partial: 'welcome', locals:{user: @user}
        .col-xs-12#topics.section-choix
          = render partial: 'pages/topic_groups_list', locals:{topic_groups: @featured_topics}
        =render partial: 'help_request_lesson', locals:{}
    -# push book again, if possible, nothing to do and no upcoming lessons
    -if !@book_again_lesson.nil? && @to_do_list.empty? && @upcoming_lessons.empty?
      .row
        .col-xs-12#book_again
          = render partial: 'book_again', locals: {lesson: @book_again_lesson}
    -# show to do list
  -unless @to_do_list.empty? || @current_lesson
    .row
      .col-xs-12#todo_list
        = render partial: 'todo_list', locals: {to_do_list: @to_do_list, user: @user}
  -# show upcoming lessons
  -unless @upcoming_lessons.empty?
    .row
      .col-xs-12#upcoming_lessons
        = render partial: 'upcoming_lessons', locals:{lessons: @upcoming_lessons}
  -# show recordings
  -unless @past_lessons.empty?
    .row
      .col-xs-12#past_lessons
        = render partial: 'past_lessons', locals:{lessons: @past_lessons}
  .row
    .col-xs-6#wallet_overview
      = render partial: 'wallet_overview', locals:{user: @user}
    .col-xs-6#bonus
      = render partial: 'bonus', locals:{user: @user}
  -unless @user.lessons_received.empty? || @user.is_a?(Teacher)
    .row
      .col-xs-12#topics.section-choix
        = render partial: 'pages/topic_groups_list', locals:{topic_groups: @featured_topics}
    = render partial: 'featured_teachers', locals: {teachers: @featured_teachers}
  - if @user.is_a?(Teacher)
    .row
      .col-xs-12#teacher-tools
        = render partial: 'dashboards/teacher/tools'
#edit-lesson-modal.modal.fade{:role => "dialog"}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close.text-white{"data-dismiss" => "modal", :type => "button"} Ã—
        %h4.modal-title Modifier la date du cours
      .modal-body
        .edit-lesson
      .modal-footer
        %span{"data-dismiss" => "modal"}
          %a{:href => "#"}
            Annuler

:javascript
  $(document).on('turbolinks:load', function(){
      $('#edit-lesson-modal').on('show.bs.modal', function(e){
      $(this).find('.edit-lesson').attr('id', 'lesson-details-'+$(e.relatedTarget).attr('data-lesson'));
    });
  });

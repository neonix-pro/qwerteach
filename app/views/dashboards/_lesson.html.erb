<div class="lesson">
  <tr>
    <td><%= lesson.id %></td>
    <td><%= lesson.teacher.firstname %><%= lesson.teacher.lastname %></td>
    <td><%= lesson.student.firstname %><%= lesson.student.lastname %></td>
    <td><%= lesson.topic_group.title %></td>
    <td><%= lesson.time_start %></td>
    <td><%= lesson.time_end %></td>
    <td><%= lesson.status.to_s %></td>
    <% if current_user.id == lesson.teacher.id && (lesson.pending_teacher? || lesson.pending_student?) %>
        <td><%= link_to t('.accept', :default => t("helpers.links.accept")),
                        lesson_accept_lesson_path(lesson), :class => 'btn btn-success' %>
          <%= link_to t('.refuse', :default => t("helpers.links.refuse")),
                      lesson_refuse_lesson_path(lesson), :class => 'btn btn-danger' %></td>
    <% end %>
    <% if current_user.id == lesson.teacher_id && lesson.created? %>
        <td><%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                        lesson_cancel_lesson_path(lesson), :class => 'btn btn-warning' %></td>
    <% elsif current_user.id == lesson.student_id && lesson.pending_teacher? %>
        <td><%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                        lesson_cancel_lesson_path(lesson), :class => 'btn btn-danger' %>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_lesson_path(lesson), :class => 'btn btn-warning' %>
        </td>
    <% else %>
        <td></td>
    <% end %>
  </tr>
</div>
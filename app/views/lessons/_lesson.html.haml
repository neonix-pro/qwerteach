.lesson
  .lesson-topic{class: "topic_#{lesson.topic.topic_group.id}"}
    =image_tag(lesson.topic.pictotype('big'), class:'lesson-picto')
  .lesson-other
    =image_tag(lesson.other(current_user).avatar(:medium), class:'lesson-user')
  .lesson-details
    .lesson-details-left.pull-left
      .lesson-duration
        #{lesson_duration(lesson.time_start, lesson.time_end)} de
        %span.text-purple
          #{lesson.topic.title}
      .lesson-participant-name
        avec #{link_to lesson.other(current_user).name, user_path(lesson.other(current_user)), class:'text-purple'}
      .lesson-date
        - if lesson.upcoming?
          Prévue dans #{time_ago_in_words(lesson.time_start)}
        - else
          Il y a #{time_ago_in_words(lesson.time_end)}
        %small (le #{lesson.time_end.strftime('%d/%m/%Y')})
    .lesson-details-right.pull-right
      .lesson-actions
        -case partial_action(lesson)
          -when 'pending'
            .pending
              Ce cours n'a pas encore été confirmé. Acceptez-vous la proposition de cours ?
              %button.btn.btn-qw.btn-green.btn-sm confirmer
              %button.btn.btn-qw.btn-green.btn-sm modifier
            %a.text-grey refuser
          -when 'show_pending'
            .show-pending
              Ce cours n'a pas encore été confirmé par l'autre partie.
              %a.text-grey annuler le cours
          -when 'expired'
            .expired Cette propositionde cours a expiré!
          -when 'payment'
            .payment
              Souhaitez-vous débloquer le payement ?
              %button.btn.btn-qw.btn-green.btn-sm payer
              %a.text-grey contester
          -when 'review'

      .lesson-show-details
        =link_to 'détails', lesson_path(lesson), class: 'btn btn-qw btn-pink btn-sm'

    .lesson-status{class: lesson_status_class(lesson) }
